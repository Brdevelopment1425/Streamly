<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Streamly - Modern Müzik Player</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Roboto&display=swap');

  * {
    box-sizing: border-box;
  }

  body {
    margin: 0; padding: 0;
    font-family: 'Roboto', sans-serif;
    background: #121212;
    color: #eee;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }

  header {
    background-color: #1db954;
    color: #000;
    padding: 15px 25px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-weight: 700;
    font-size: 1.5rem;
    user-select: none;
    box-shadow: 0 4px 10px rgba(29, 185, 84, 0.7);
  }

  nav button {
    background: none;
    border: none;
    font-weight: 600;
    font-size: 1rem;
    color: #000;
    cursor: pointer;
    padding: 8px 14px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: background-color 0.3s ease;
  }
  nav button:hover,
  nav button.active {
    background-color: rgba(0,0,0,0.15);
  }
  nav button svg {
    width: 20px; height: 20px;
    fill: #000;
  }

  main {
    flex: 1;
    max-width: 640px;
    margin: 20px auto;
    padding: 0 10px 50px;
  }

  /* Filtre butonları */
  #filterButtons {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
    justify-content: center;
  }
  #filterButtons button {
    background: #222;
    border: none;
    color: #eee;
    padding: 10px 16px;
    border-radius: 14px;
    font-weight: 700;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    box-shadow: 0 0 10px rgba(29, 185, 84, 0.5);
    transition: background-color 0.3s ease;
  }
  #filterButtons button:hover,
  #filterButtons button.active {
    background: #1db954;
    color: #000;
  }
  #filterButtons svg {
    width: 18px; height: 18px;
    fill: currentColor;
  }

  /* Şarkı listesi */
  #playlist {
    list-style: none;
    padding: 0;
    margin: 0 auto;
    max-width: 100%;
  }
  #playlist li {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 10px 15px;
    border-radius: 12px;
    cursor: pointer;
    background: #222;
    margin-bottom: 10px;
    transition: background-color 0.3s ease;
    user-select: none;
  }
  #playlist li:hover {
    background-color: #1db954;
    color: #000;
  }
  #playlist li.active {
    background-color: #1db954;
    color: #000;
    font-weight: 700;
  }
  #playlist img.cover {
    width: 50px;
    height: 50px;
    object-fit: cover;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(29, 185, 84, 0.7);
  }
  #playlist .song-info {
    flex: 1;
    font-size: 1.05rem;
  }
  #playlist .count {
    font-size: 0.85rem;
    color: #bbb;
    margin-left: 6px;
  }

  /* Favori butonu */
  .fav-btn {
    background: none;
    border: none;
    cursor: pointer;
    width: 30px;
    height: 30px;
    padding: 0;
    fill: #aaa;
    transition: fill 0.3s ease;
  }
  .fav-btn.active {
    fill: #1db954;
  }
  .fav-btn:hover {
    fill: #1db954;
  }

  /* Ekleme form */
  #addForm {
    background: #222;
    border-radius: 16px;
    padding: 16px 20px;
    box-shadow: 0 0 20px rgba(29,185,84,0.6);
    margin-bottom: 30px;
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    align-items: center;
  }
  #addForm input {
    flex: 1 1 130px;
    padding: 14px 18px;
    font-size: 1rem;
    border-radius: 10px;
    border: none;
    background: #333;
    color: #eee;
    transition: background-color 0.3s ease;
  }
  #addForm input::placeholder {
    color: #888;
  }
  #addForm input:focus {
    outline: none;
    background: #444;
  }
  #addForm button {
    background: #1db954;
    color: #000;
    border: none;
    padding: 14px 26px;
    border-radius: 14px;
    font-weight: 700;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 10px;
    box-shadow: 0 0 10px #1db954;
    transition: background-color 0.3s ease;
  }
  #addForm button:hover {
    background: #17a845;
  }
  #addForm button svg {
    width: 22px;
    height: 22px;
    fill: #000;
    transition: transform 0.3s ease;
  }
  #addForm button:hover svg {
    transform: rotate(20deg);
  }

  /* Player bölümü */
  #player {
    display: none;
    margin-top: 40px;
    text-align: center;
  }
  #player img#playerCover {
    width: 180px;
    height: 180px;
    border-radius: 16px;
    object-fit: cover;
    box-shadow: 0 0 30px #1db954;
    margin-bottom: 20px;
    transition: transform 0.5s ease;
  }
  #player img#playerCover.playing {
    animation: pulse 3s infinite;
  }
  @keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
  }
  #playerTitle {
    font-weight: 700;
    font-size: 1.4rem;
    margin-bottom: 15px;
  }
  audio#audioPlayer {
    width: 100%;
    outline: none;
    border-radius: 14px;
    margin-bottom: 20px;
  }
  .controls {
    display: flex;
    justify-content: center;
    gap: 35px;
    margin-bottom: 20px;
  }
  .controls button {
    background: none;
    border: none;
    cursor: pointer;
    color: #1db954;
    font-size: 2.8rem;
    transition: color 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .controls button:hover {
    color: #17a845;
  }

  #volumeControl {
    max-width: 320px;
    margin: 0 auto;
  }
  #volumeSlider {
    width: 100%;
    cursor: pointer;
    -webkit-appearance: none;
    height: 10px;
    border-radius: 8px;
    background: #333;
    outline: none;
  }
  #volumeSlider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 20px;
    height: 20px;
    background: #1db954;
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 0 10px #1db954;
  }
  #volumeSlider::-moz-range-thumb {
    width: 20px;
    height: 20px;
    background: #1db954;
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 0 10px #1db954;
  }

  #emptyMsg {
    text-align: center;
    color: #666;
    font-style: italic;
    margin-top: 25px;
  }

  /* Responsive */
  @media (max-width: 480px) {
    main {
      padding: 0 15px 40px;
    }
    #addForm input {
      flex-basis: 100%;
    }
    nav {
      gap: 6px;
    }
    nav button {
      font-size: 0.9rem;
      padding: 6px 10px;
    }
  }
</style>
</head>
<body>

<header>
  <div>Streamly</div>
  <nav>
    <button id="btnHome" class="active" aria-label="Ana Sayfa" title="Ana Sayfa">
      <svg xmlns="http://www.w3.org/2000/svg" fill="#000" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg> Ana Sayfa
    </button>
    <button id="btnPlayer" aria-label="Çalma Listesi" title="Çalma Listesi">
      <svg xmlns="http://www.w3.org/2000/svg" fill="#000" viewBox="0 0 24 24"><path d="M3 18v-12l18 6-18 6z"/></svg> Çalma Listesi
    </button>
  </nav>
</header>

<main>
  <section id="home" tabindex="0">
    <form id="addForm" aria-label="Şarkı ekleme formu">
      <input type="text" id="newName" placeholder="Şarkı adı" aria-required="true" required autocomplete="off" />
      <input type="url" id="newUrl" placeholder="MP3 ya da ses linki" aria-required="true" required autocomplete="off" />
      <input type="url" id="newCover" placeholder="Albüm kapağı URL (opsiyonel)" autocomplete="off" />
      <button type="submit" title="Şarkı Ekle">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 11h8v2h-8v8h-2v-8H3v-2h8V3h2v8z"/></svg> Ekle
      </button>
    </form>

    <div id="filterButtons" role="group" aria-label="Şarkı listesi filtreleri">
      <button data-filter="mostAdded" class="active" aria-pressed="true" type="button" title="En Çok Eklenenler">
        <svg xmlns="http://www.w3.org/2000/svg" fill="#1db954" viewBox="0 0 24 24"><path d="M12 3v18"/></svg> En Çok Eklenenler
      </button>
      <button data-filter="mostPlayed" type="button" aria-pressed="false" title="En Çok Dinlenenler">
        <svg xmlns="http://www.w3.org/2000/svg" fill="#1db954" viewBox="0 0 24 24"><path d="M12 21l8-12H4z"/></svg> En Çok Dinlenenler
      </button>
      <button data-filter="favorites" type="button" aria-pressed="false" title="Favoriler">
        <svg xmlns="http://www.w3.org/2000/svg" fill="#1db954" viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41 0.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg> Favoriler
      </button>
    </div>

    <ul id="playlist" aria-live="polite" aria-label="Şarkı listesi"></ul>
    <p id="emptyMsg" style="display:none;">Gösterilecek şarkı yok.</p>
  </section>

  <section id="player" tabindex="0" aria-label="Müzik oynatıcı">
    <img src="" alt="Albüm Kapağı" id="playerCover" />
    <div id="playerTitle" aria-live="polite">Şu an çalan: -</div>
    <audio id="audioPlayer" controls></audio>

    <div class="controls" role="group" aria-label="Oynatma kontrolleri">
      <button id="prevBtn" title="Önceki şarkı" aria-label="Önceki">
        <svg xmlns="http://www.w3.org/2000/svg" fill="#1db954" viewBox="0 0 24 24" width="28" height="28"><path d="M6 6h2v12H6zM8 12l10 6V6z"/></svg>
      </button>
      <button id="playPauseBtn" title="Oynat/Durdur" aria-label="Oynat/Durdur">
        <svg xmlns="http://www.w3.org/2000/svg" fill="#1db954" viewBox="0 0 24 24" width="28" height="28" id="playIcon"><path d="M8 5v14l11-7z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" fill="#1db954" viewBox="0 0 24 24" width="28" height="28" id="pauseIcon" style="display:none"><path d="M6 19h4V5H6zm8-14v14h4V5z"/></svg>
      </button>
      <button id="nextBtn" title="Sonraki şarkı" aria-label="Sonraki">
        <svg xmlns="http://www.w3.org/2000/svg" fill="#1db954" viewBox="0 0 24 24" width="28" height="28"><path d="M16 6h2v12h-2zM14 12l-10 6V6z"/></svg>
      </button>
    </div>

    <div id="volumeControl">
      <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="1" aria-label="Ses seviyesi" />
    </div>
  </section>
</main>

<script>
  const playlistEl = document.getElementById('playlist');
  const playerCover = document.getElementById('playerCover');
  const playerTitle = document.getElementById('playerTitle');
  const audioPlayer = document.getElementById('audioPlayer');
  const volumeSlider = document.getElementById('volumeSlider');
  const playPauseBtn = document.getElementById('playPauseBtn');
  const playIcon = document.getElementById('playIcon');
  const pauseIcon = document.getElementById('pauseIcon');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const btnHome = document.getElementById('btnHome');
  const btnPlayer = document.getElementById('btnPlayer');
  const sectionHome = document.getElementById('home');
  const sectionPlayer = document.getElementById('player');
  const filterButtons = document.querySelectorAll('#filterButtons button');
  const emptyMsg = document.getElementById('emptyMsg');
  const addForm = document.getElementById('addForm');
  const inputName = document.getElementById('newName');
  const inputUrl = document.getElementById('newUrl');
  const inputCover = document.getElementById('newCover');

  // Şarkı listesi (başlangıç örnekleri)
  let songs = [
    {
      id: 1,
      name: "SoundHelix Song 1",
      file: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3",
      cover: "https://cdn.pixabay.com/photo/2018/02/24/18/24/headphones-3175356_1280.jpg",
      count: 0,
      favori: false
    },
    {
      id: 2,
      name: "SoundHelix Song 2",
      file: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3",
      cover: "https://cdn.pixabay.com/photo/2016/11/29/06/15/headphones-1868612_1280.jpg",
      count: 0,
      favori: false
    }
  ];

  let nextId = 3;
  let currentIndex = -1;
  let currentFilter = 'mostAdded';

  // Menü butonları ile bölüm geçişi
  btnHome.addEventListener('click', () => {
    showSection('home');
  });
  btnPlayer.addEventListener('click', () => {
    showSection('player');
  });

  function showSection(section) {
    if(section === 'home') {
      sectionHome.style.display = 'block';
      sectionPlayer.style.display = 'none';
      btnHome.classList.add('active');
      btnPlayer.classList.remove('active');
    } else {
      sectionHome.style.display = 'none';
      sectionPlayer.style.display = 'block';
      btnHome.classList.remove('active');
      btnPlayer.classList.add('active');
    }
  }

  // Filtre butonları
  filterButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      filterButtons.forEach(b => {
        b.classList.remove('active');
        b.setAttribute('aria-pressed', 'false');
      });
      btn.classList.add('active');
      btn.setAttribute('aria-pressed', 'true');
      currentFilter = btn.dataset.filter;
      renderPlaylist();
    });
  });

  // Şarkı ekleme formu gönderimi
  addForm.addEventListener('submit', e => {
    e.preventDefault();
    const name = inputName.value.trim();
    const file = inputUrl.value.trim();
    const cover = inputCover.value.trim();
    if(!name || !file) {
      alert("Şarkı adı ve ses linki zorunludur.");
      return;
    }
    songs.push({id: nextId++, name, file, cover, count: 0, favori: false});
    inputName.value = "";
    inputUrl.value = "";
    inputCover.value = "";
    renderPlaylist();
  });

  // Listeyi renderla (filtreye göre)
  function renderPlaylist() {
    playlistEl.innerHTML = "";

    let filteredSongs = [];
    if(currentFilter === 'mostAdded') {
      filteredSongs = [...songs].sort((a,b) => b.id - a.id);
    } else if(currentFilter === 'mostPlayed') {
      filteredSongs = [...songs].sort((a,b) => b.count - a.count);
    } else if(currentFilter === 'favorites') {
      filteredSongs = songs.filter(s => s.favori);
    }

    if(filteredSongs.length === 0) {
      emptyMsg.style.display = "block";
    } else {
      emptyMsg.style.display = "none";
    }

    filteredSongs.forEach((song, i) => {
      const li = document.createElement('li');
      li.classList.toggle('active', i === currentIndex);
      li.tabIndex = 0;
      li.setAttribute('role', 'button');
      li.setAttribute('aria-pressed', i === currentIndex ? 'true' : 'false');

      // Albüm kapağı
      const img = document.createElement('img');
      img.src = song.cover || "https://via.placeholder.com/50x50?text=♫";
      img.alt = song.name + " albüm kapağı";
      img.className = "cover";

      // Şarkı adı ve dinlenme sayısı
      const info = document.createElement('div');
      info.className = 'song-info';
      info.textContent = song.name;

      const countSpan = document.createElement('span');
      countSpan.className = 'count';
      countSpan.textContent = `🎧 ${song.count} dinlenme`;
      info.appendChild(countSpan);

      // Favori butonu
      const favBtn = document.createElement('button');
      favBtn.className = 'fav-btn' + (song.favori ? ' active' : '');
      favBtn.title = song.favori ? 'Favorilerden Kaldır' : 'Favorilere Ekle';
      favBtn.setAttribute('aria-label', favBtn.title);
      favBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41 0.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>`;

      favBtn.onclick = (e) => {
        e.stopPropagation();
        song.favori = !song.favori;
        renderPlaylist();
      };

      li.appendChild(img);
      li.appendChild(info);
      li.appendChild(favBtn);

      li.onclick = () => playSong(song.id);
      li.onkeydown = (e) => { if(e.key === 'Enter') playSong(song.id); };

      playlistEl.appendChild(li);
    });
  }

  // Şarkı oynat
  function playSong(id) {
    const index = songs.findIndex(s => s.id === id);
    if(index === -1) return;

    currentIndex = index;
    const song = songs[index];

    audioPlayer.src = song.file;
    audioPlayer.play().catch(e => {
      alert("Şarkı oynatılamıyor. Link geçerli mi kontrol et.");
      console.error(e);
    });

    playerCover.src = song.cover || "https://via.placeholder.com/180x180?text=♫";
    playerTitle.textContent = "Şu an çalan: " + song.name;

    // Dinlenme sayısını arttır
    song.count++;

    renderPlaylist();
    showSection('player');

    // Play/pause ikon değişimi
    updatePlayPauseIcon(true);
  }

  // Player kontrol butonları
  prevBtn.addEventListener('click', () => {
    if(songs.length === 0) return;
    currentIndex = currentIndex > 0 ? currentIndex - 1 : songs.length - 1;
    playSong(songs[currentIndex].id);
  });
  nextBtn.addEventListener('click', () => {
    if(songs.length === 0) return;
    currentIndex = currentIndex < songs.length - 1 ? currentIndex + 1 : 0;
    playSong(songs[currentIndex].id);
  });

  playPauseBtn.addEventListener('click', () => {
    if(audioPlayer.paused) {
      audioPlayer.play();
      updatePlayPauseIcon(true);
    } else {
      audioPlayer.pause();
      updatePlayPauseIcon(false);
    }
  });

  // Klavyeden space ile durdur/başlat
  document.addEventListener('keydown', (e) => {
    if(e.code === 'Space' && (sectionPlayer.style.display === 'block')) {
      e.preventDefault();
      if(audioPlayer.paused) {
        audioPlayer.play();
        updatePlayPauseIcon(true);
      } else {
        audioPlayer.pause();
        updatePlayPauseIcon(false);
      }
    }
  });

  // Ses seviyesi kontrolü
  volumeSlider.addEventListener('input', () => {
    audioPlayer.volume = volumeSlider.value;
  });

  // Audio play/pause eventi ikon güncelle
  audioPlayer.addEventListener('play', () => {
    updatePlayPauseIcon(true);
    playerCover.classList.add('playing');
  });
  audioPlayer.addEventListener('pause', () => {
    updatePlayPauseIcon(false);
    playerCover.classList.remove('playing');
  });
  audioPlayer.addEventListener('ended', () => {
    nextBtn.click();
  });

  function updatePlayPauseIcon(playing) {
    if(playing) {
      playIcon.style.display = 'none';
      pauseIcon.style.display = 'inline';
    } else {
      playIcon.style.display = 'inline';
      pauseIcon.style.display = 'none';
    }
  }

  // Başlangıçta listeyi yükle ve ana sayfayı aç
  renderPlaylist();
  showSection('home');
</script>

</body>
</html>
